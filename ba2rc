#!/bin/sh
case "$1" in
    --help | -help | -h)
        printf "%s\n\n" "$0"
        printf "Outputs ~/.bash_aliases alias entries converted to ranger rc.conf format.\n"

        exit 0
    ;;
esac

[ -e "$HOME/.bash_aliases" ] \
    && ALIASES="$HOME/.bash_aliases" \
    || { printf "No ~/.bash_aliases file found on system.\n"; exit 1; }

printf "# This file was generated by %s. Aliases were sourced from %s.\n\n" "$ALIASES" "$0"

printf "# Options\n"
printf "set draw_borders true\n"
printf "set preview_images true\n"
printf "set preview_images_method ueberzug\n\n"

printf "# Internal aliases.\n"
printf "map br bulkrename\n"
printf "map bg shell wallpaper_handler %%s\n"
printf "map DD shell rb %%s\n"

# The space at the end of "cd " is important.
grep "cd " "$ALIASES" \
    | sed -e "s/alias\ /map\ /g" -e "s/\"//g" -e "s/=/ /g"

exit 0
